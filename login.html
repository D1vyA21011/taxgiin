<!doctype html>
<html lang="en">

<head>
    <title>Login</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS v5.2.1 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">


    <!-- google api -->
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <meta name="google-signin-client_id"
        content="214830644505-o0o306cidis9j2u2i4f55tes9dm3vb20.apps.googleusercontent.com">


    <link rel="stylesheet" href="./css/navbar.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
</head>

<body>
    <div>
        <!-- navbar start -->
        <nav class="navbar navbar-expand-lg bg-light">
            <div class="container">

                <div class="">
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarNavAltMarkup">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                        <div class="navbar-nav align-items-center">
                            <a class="nav-link active" href="./index1.html">Home</a>

                            <div class="drop">
                                <button class="dropbtn nav-link">Products</button>
                                <div class="drop-content">
                                    <div class="sub-drop">
                                        <button class="sub-dropbtn">Individual</button>
                                        <div class="sub-drop-content">
                                            <a href="">1) file your return</a><br>
                                            <a href="">2) Refund Status</a><br>
                                            <a href="">3) NRI Taxes</a>

                                        </div>
                                    </div>
                                    <div class="sub-drop">
                                        <button class="sub-dropbtn">Business</button>
                                        <div class="sub-drop-content">

                                            <div class="sub-sub-drop">
                                                <button class="sub-sub-dropbtn">1) GST</button>
                                                <div class="sub-sub-drop-content">
                                                    <a href="./pages/products/Gst/Gst_Reg.html">1) GST Registration</a>
                                                    <br>

                                                    <a href="./pages/products/Gst/Gst_filling.html">3) GST Filing</a>
                                                    <br>

                                                </div>
                                            </div>
                                            <div class="sub-sub-drop">
                                                <button class="sub-sub-dropbtn">2) Compliances</button>
                                                <div class="sub-sub-drop-content">
                                                    <a href="./pages/products/Complinces/Digital_signature.html">1)
                                                        Digital Signature</a><br>
                                                    <a href="./pages/products/Complinces/Food_Licence.html">2) FSSA/FOOD
                                                        Licenses</a><br>
                                                    <a href="./pages/products/Complinces/Trademark_Reg.html">3)
                                                        Trademark Reg</a><br>
                                                    <a href="./pages/products/Complinces/Farmer_Reg.html">4) FPO /
                                                        Farmer Reg</a><br>
                                                    <a href="./pages/products/Complinces/Business_pan.html">5) Business
                                                        PAN</a><br>
                                                    <a href="./pages/products/Complinces/Tan_reg.html">6) TAN
                                                        Reginstration</a><br>
                                                </div>
                                            </div>
                                            <div class="sub-sub-drop">
                                                <button class="sub-sub-dropbtn">3) Compnay Reg</button>
                                                <div class="sub-sub-drop-content">
                                                    <a
                                                        href="./pages/products/Company Registration/One_person_company_registration.html">1)
                                                        One Person Company Registration</a><br>
                                                    <a
                                                        href="./pages/products/Company Registration/LimitedPartnership.html">2)
                                                        Limited Liability</a><br>
                                                    <a href="./pages/products/Company Registration/Sole.html">3) Sole
                                                        Propriteorship</a><br>
                                                    <a href="./pages/products/Company Registration/Shopact.html">4) Shop
                                                        Act</a><br>
                                                    <a href="./pages/products/Company Registration/Udyam_reg.html">5)
                                                        Udyam Reg</a><br>
                                                    <a href="./pages/products/Company Registration/Partnersheep.html">6)
                                                        Partnership Deed</a><br>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <a class="nav-link" href="./blogs.html">Blog</a>
                            <a class="nav-link" href="./about.html">About Us</a>
                            <a class="nav-link" href="./contactus.html">Contact Us</a>
                            <button class="btn btn-primary"><a class="text-light mx-auto"
                                    href="login.html">Login</a></button>

                        </div>
                    </div>
                </div>
                <div class="">
                    <a class="navbar-brand" href="#">
                        <img src="./data/Arjun logo Taxgiin.png" class='img-fluid' style="height: 70px; width: 250px;"
                            alt="">
                    </a>
                </div>
            </div>
        </nav>
        <!-- navbar end -->

        <section class="vh-100">
            <div class="container-fluid h-custom">
                <h1 class="text-center">Login</h1>
                <div class="row d-flex justify-content-center align-items-center h-100">
                    <div class="col-md-9 col-lg-6 col-xl-5 animate__fadeInUp animate__animated">
                        <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp"
                            class="img-fluid" alt="Sample image">
                    </div>
                    <div class="col-md-8 col-lg-6 col-xl-4 mt-5 offset-xl-1 animate__fadeInDown animate__animated">
                        <form id="loginForm" method="POST" action="http://localhost:5000/api/user/login">

                            <div class="form-outline mb-4">
                                <label class="form-label" for="form3Example3">Email</label>
                                <input class="form-control form-control-lg" type="text" id="email"
                                    placeholder="Enter Username" required />
                            </div>

                            <div class="form-outline mb-3">
                                <label class="form-label" for="form3Example4">Password</label>
                                <input class="form-control form-control-lg" type="password" id="password"
                                    placeholder="Enter password" required />
                            </div>

                            <div class="text-center text-lg-start mt-4 pt-2">
                                <button type="submit" class="btn btn-info text-light btn-lg">Login</button>
                                <div class="">
                                    <p class="small fw-bold mt-2 pt-1 mb-0">Don't have an account? <a
                                            href="./register.html" class="link-danger">Register</a>
                                    <p class=""><a href="./forgetpassword.html">Forget Password</a></p>
                                    </p>
                                </div>

                            </div>
                            <!-- google button -->
                            <div class="g-signin2 mt-3 mx-5" data-onsuccess="onSignIn"></div>
                        </form>
                    </div>
                </div>
            </div>

        </section>
    </div>




    <!-- Bootstrap JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous">
        </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
        integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz" crossorigin="anonymous">
        </script>

    <!-- <script src="./js/login.js"></script> -->
    <script>


        document.getElementById('loginForm').addEventListener('submit', function (event) {
            event.preventDefault(); // Prevents the default form submission behavior
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');


            // Send the form data (replace with your actual fetch/axios call)
            fetch('http://localhost:5000/api/user/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    email: emailInput.value,
                    password: passwordInput.value
                }),
            })
                .then(response => response.json())
                .then(data => {
                    // console.log(data);
                    if (data.result) {
                        console.log(data.result.userValid);
                        // console.log(data.token);
                        const token = data.result.userValid
                        localStorage.setItem("token", JSON.stringify(token))
                        // Redirect to home page on success
                        setTimeout(() => {
                            window.location.href = './index1.html';
                        }, 10000);
                    } else {
                        // Display error message from API response
                        alert(data.message);
                    }
                })
                .catch(error => {
                    // Handle network error
                    alert('An error occurred. Please try again later!');
                });

            return true; // Prevent form submission by default

        });

    </script>
</body>

</html>